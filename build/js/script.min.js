"use strict";$((function(){var t=JSON.parse(localStorage.getItem("mainArr"));function e(){var e=[],n=t.length;console.log(localStorage);for(var o=0;o<n;o++)e[o]=t[o].number;var r=e.reduce((function(t,e){return t+e}),0);$(".total-num").text(r),localStorage.setItem("total",r)}null==t&&(t=[{text:"Введите название строки",number:0}],localStorage.setItem("mainArr",JSON.stringify(t))),$(".box-content").on("mousedown",".plusminus",(function(n){var o=$(n.target).nextAll(".number").text();"+"==$(n.target).val()?o++:o--,$(n.target).nextAll(".number").text(o),function(e){var n=$(e.target).closest(".string").index(),o=Number($(e.target).nextAll(".number").text()),r=$(e.target).prevAll(".text").text();t[n]={text:r,number:o},localStorage.setItem("mainArr",JSON.stringify(t))}(n),e(),localStorage.setItem("mainArr",JSON.stringify(t))}));var n=function(){$(".box-content").append('\n\n       <div class="string">\n         <span class="text" contenteditable="true">Введите название строки</span>\n         <button class="delete-string icon-cross hidden"></button>\n         <button class="plusminus icon-plus" value="+"></button>\n         <button class="plusminus icon-minus value="-""></button>\n         <span class="number" contenteditable="true">0</span>\n         <div class="del-string hidden">\n           <div class="del-string__wrap">\n             <button class="yes">Да</button>\n             <p class="del-string__text">Удалить строку?</p>\n             <button class="no">Нет</button>\n           </div>\n         </div>\n       </div>\n\n       ');var n=$(".box-content > .string").length;t[n-=1]={text:"Введите название строки",number:0},localStorage.setItem("mainArr",JSON.stringify(t)),e()};$("#newString").on("mousedown",n),$(".box-content").on("mousedown",".text",(function(t){$(".delete-string").addClass("hidden"),$(t.target).nextAll(".delete-string").removeClass("hidden")})),$(document).on("mousedown",(function(t){var e=$(".delete-string"),n=$(".text");e.is(t.target)||n.is(t.target)||$(".delete-string").addClass("hidden")})),$(".box-content").on("mousedown",".delete-string",(function(t){$(t.target).addClass("hidden"),$(t.target).nextAll(".del-string").removeClass("hidden")})),$(".box-content").on("mousedown",".no",(function(t){$(t.target).closest(".del-string").addClass("hidden")})),$(".box-content").on("mousedown",".yes",(function(n){var o=$(n.target).closest(".string").index();t.splice(o,1),$(n.target).closest(".string").remove(),e(),localStorage.setItem("mainArr",JSON.stringify(t))})),$(".clear-all").on("mousedown",(function(){$("#clearText").removeClass("hidden")})),$("#clearTextNo").on("mousedown",(function(){$("#clearText").addClass("hidden")})),$("#clearTextYes").on("mouseup",(function(){for(;t.length>0;)t.pop();localStorage.clear(),$("#clearText").addClass("hidden"),$(".box-content").html(""),localStorage.setItem("total",0),localStorage.setItem("main-title","Введите название счетчика"),$(".main-title").text("Введите название счетчика"),n()})),$(".zero").on("mousedown",(function(){$("#clearNum").removeClass("hidden")})),$("#clearNumNo").on("mousedown",(function(){$("#clearNum").addClass("hidden")})),$("#clearNumYes").on("mouseup",(function(){for(var e=t.length,n=0;n<e;n++)t[n].number=0;localStorage.setItem("total",0),localStorage.setItem("mainArr",JSON.stringify(t)),$(".total-num").text(0),$(".number").text(0),$("#clearNum").addClass("hidden")})),$(".box-content").on("blur",".text",(function(e){!function(e){var n=$(e.target).closest(".string").index(),o=Number($(e.target).nextAll(".number").text()),r=$(e.target).text();t[n]={text:r,number:o},localStorage.setItem("mainArr",JSON.stringify(t))}(e)})),$(".box-content").on("blur",".number",(function(n){var o=$(n.target).closest(".string").index(),r=Number($(n.target).text()),a=$(n.target).prevAll(".text").text();t[o]={text:a,number:r},e(),localStorage.setItem("mainArr",JSON.stringify(t))})),$(".main-title").on("blur",(function(){var t=$(this).text();localStorage.setItem("main-title",t)})),$(".report").on("mousedown",(function(){$("#boxReport").removeClass("hidden");var e=$(".main-title").text();$("#report").append("<b>".concat(e,"</b>\n</br>"));var n=$(".total-num").text();$("#report").append("Всего: ".concat(n,"\n</br>"));for(var o=t.length,r=0;r<o;r++){var a=t[r].text,s=t[r].number;$("#report").append("".concat(a,": ").concat(s,"\n</br>"))}})),$(".closeReport").on("mousedown",(function(){$("#boxReport").addClass("hidden"),$("#report").text("")})),$("#coppy").on("mousedown",(function(){var t=$("<textarea>");$("body").append(t),t.val($("#report").text()).select(),document.execCommand("copy"),t.remove()}))}));